---
title: "âˆ†phz* +/- Ethidium"
subtitle: "Processing"
author: "Scott Saunders"
fontsize: 12pt
date: "09_09_19 "
output:
  html_document:
    self_contained: false
    toc: true
    code_folding: hide
  github_document:
    pandoc_args: --webtex
---

```{r setup, echo=T, message=FALSE, warning=FALSE}
library(tidyverse)
library(cowplot)
library(broom) 
library(modelr) 
library(viridis)
library(lubridate)
library(hms)
library(knitr)
library(kableExtra)

knitr::opts_chunk$set(tidy.opts=list(width.cutoff=60),tidy=TRUE, echo = TRUE, message=FALSE, warning=FALSE, fig.align="center")

source("../../tools/echem_processing_tools.R")
source("../../tools/plotting_tools.R")

theme_set(theme_1())
```

# Intro



# Methods

In duplicate (biofilms A and B) an IDA biofilm was exposed to three different conditions sequentially:

1. Normal transfer. 75uM PYO (in PBS 50) to PBS
2. Transfer to EtBr. 75uM PYO (in PBS 50) to 10uM EtBr (in PBS)
2. Soak in EtBr and Transfer to EtBr. 75uM PYO + 10uM EtBr (in PBS 50) to 10uM EtBr (in PBS)

Note that biofilm B was dropped facedown prior to imaging. 


# Results

```{r}
first_reps <- read_csv("../processing/09_09_19_first_transfer_reps.csv")

soak_data <- read_csv("../processing/09_09_19_soak_data.csv")

swv_gc_max <- read_csv("../processing/09_09_19_swv_gc_max_processed.csv")
```

```{r}
ggplot(soak_data %>% filter(echem == 'SWV' & electrode =='i1' & PHZadded == '75uM' & rep == 2), aes(x = E, y = current, color = factor(reactor_num))) + 
  geom_path() + facet_wrap(~biofilm) + scale_x_reverse()+
  labs(title = 'SWV - Soak')
```

```{r}
ggplot(soak_data %>% filter(electrode == 'i2' & echem == 'GC' & PHZadded == '75uM'), aes(x = E, y = current, color = factor(reactor_num))) + 
  geom_path() + facet_wrap(~biofilm) + scale_x_reverse() + 
  labs(title = 'GC - Soak')
```

```{r}
ggplot(first_reps %>% filter(echem == 'swv' & electrode == 'i1'), aes(x = E, y = pred, color = condition, group = condition)) + 
  geom_path() + facet_wrap(rep~biofilm, scales = 'free') + scale_x_reverse() + 
  labs(title = 'SWV - First transfer reps')
```

```{r}
ggplot(first_reps %>% filter(echem == 'gc' & electrode == 'i2'), aes(x = E, y = current, color = condition, group = condition)) + 
  geom_path() + facet_wrap(rep~biofilm, scales = 'free') + scale_x_reverse() + 
  labs(title = 'GC - First transfer reps')
```

```{r}
ggplot(swv_gc_max %>% filter(electrode_from_gc == 'i2' & electrode_from_swv == 'i1'), aes(x = max_current_from_swv, y = max_current_from_gc, color = condition)) + 
  geom_point() + facet_wrap(~biofilm, scales = 'free')
```

```{r}
ggplot(swv_gc_max %>% filter(electrode_from_gc == 'i2' & electrode_from_swv == 'i1'), aes(x = max_current_from_swv, y = max_current_from_gc, color = condition)) + 
  geom_smooth(method = 'lm')+
  geom_point(shape = 21) + facet_wrap(~biofilm, scales = 'free')
```

```{r}
ggplot(swv_gc_max %>% filter(electrode_from_swv == 'i1'), aes(x = norm_time_from_swv, y = max_current_from_swv, color = condition)) + geom_point() + facet_wrap(~biofilm, scales = 'free')
```

```{r}
ggplot(swv_gc_max %>% filter(electrode_from_gc == 'i2'), aes(x = norm_time_from_gc, y = max_current_from_gc, color = condition)) + geom_point() + facet_wrap(~biofilm, scales = 'free')
```

Biofilm B was very thick, probably went anaerobic when gas tube got clogged.


# Next steps

-------
```{r}
sessionInfo()
```